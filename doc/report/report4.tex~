
\documentclass{acm_proc_article-sp}
%\usepackage{ucs}
%\usepackage{luaotfload}
%\usepackage[EU2]{fontenc}
%\usepackage{lmodern}
\usepackage[latin1]{inputenc}
%\documentclass[a4paper,10pt]{book}
%\textwidth 15cm
%\textheight 20cm
%\oddsidemargin -0.5cm

%\topmargin -2.0cm

%\usepackage{natbib}
\usepackage[numbers]{natbib} 
\usepackage{amsmath}
\usepackage{textcomp}
\usepackage{graphicx}

\usepackage{color}


\begin{document}
\title{ SEBREI: Sistema Experto basado en reglas para la recomendación de equipos de impresión}
%\titlenote{ } 
\subtitle{Trabajo final de la asignatura Introducción a la Inteligencia Artificial
de la carrera Licenciatura en Ciencias de la Computación.}
%\numberofauthors{1}
%\titlenotecount=1
\author{
\alignauthor Erica Vidal\\
       \affaddr{Fac. de Cs. Exactas, Ingeniería y Agrimensura}\\
       \affaddr{Departamento de Ciencias de la Computación}\\
       \affaddr{Pellegrini 250, Rosario, Santa Fe, Argentina}\\
       \email{ericavidal@gmail.com}
}




\pagenumbering{arabic} 
\maketitle
\begin{abstract}
La elección de una determinada tecnología de impresión 
 a la hora de comprar está sujeta a numerosas cuestiones 
relacionadas con el uso que se le va a dar al equipo, 
la velocidad de respuesta deseada, la calidad esperada, factores económicos, etc.
 Requiere tiempo y esfuerzo investigar las tecnologías 
disponibles en el mercado y decidir en base a las características
 que posee cada equipo, aquel que resulte más conveniente según las necesidades.
 Para facilitar la tarea de elección se suele consultar con un vendedor. 

Las heurísticas usadas por un vendedor de equipos de impresión pueden ser capturadas
en un sistema experto basado en reglas que emule el razonamiendo seguido por el especialista. 
El sistema SEBREI integra la tecnología de sistema experto con una interfaz web, utilizando
una base de datos para ofrecer la posibilidad de mantener la base de conocimiento actualizada
e incorporar nuevas tecnologías.

\end{abstract}


\section{Sistemas Expertos}
\medskip 
Un experto es una persona que tiene experiencia en cierta área, tiene habilidades que la mayoría  
no y/o puede resolver problemas que la gran parte de las personas no pueden, o lo puede hacer de una 
manera más eficiente. 

Los términos sistema experto, sistema basado en conocimiento o sistema experto basado en conocimiento
a menudo se usan como sinónimos.

Los sistemas expertos son una rama de la Inteligencia Artificial que hace un amplio 
uso del conocimiento especializado para resolver problemas como un especialista humano.\cite{Riley}
Se los puede definir como una clase de programas que son capaces de: aconsejar, categorizar, analizar, consultar, 
di- señar, diagnosticar, explicar, explorar, interpretar, justificar, planificar, son en suma,
 programas capaces de manejar pro- blemas que normalmente requieren para su 
resolución la intervención humana especializada.\cite{garcia}


El conocimiento en un sistema experto puede representar experiencia o conocimiento que está disponible
en libros, revistas y personas.

Todo sistema experto está especializado en cierto campo o área del conocimiento.
El área de conocimiento que es capturado por un sistema experto se llama \textit{dominio de tarea} o 
\textit{dominio de aplicación}.



\subsection{Estructura básica de un Sistema Experto}

\smallskip 

La estructura básica de un sistema experto consta de una \textit{base de conocimiento} que es el conjunto de 
hechos y heurísticas debidamente almacenadas y un \textit{motor de inferencias} que es el programa 
que gestiona y controla la base de conocimien- to. 
En un sistema experto la base de conocimiento y el motor de inferencias se encuentran separados.

En la \textbf{figura 1} se ilustra la estructura básica de un sistema experto.


\begin{figure}[h]
 \centering
 \includegraphics{SE.png}
 % SE.png: 0x0 pixel, 0dpi, 0.00x0.00 cm, bb=
 \caption{Estructura básica de un sistema experto.}
 \label{fig:se}
\end{figure}

Otros componentes son la memoria de trabajo,
la interfaz con el usuario y el módulo de explicación.

 La \textit{memoria de trabajo} también llamada base o lista de hechos (facts list)
es el conjunto de datos 
de un determinado problema y se almacena en forma separada de la base de conocimiento.
 El \textit{módulo de explicación} o \textit{módulo de justificación} explica el razonamiento utilizado por el sistema para 
llegar a una conclusión. 

\subsection{Representación del conocimiento}
\smallskip 
``En IA, la representación del conocimiento es una combinación de estructura de datos y procedimientos de
interpretación, que si se usan de una forma adecuada en un programa se tendrá un comportamiento experto."\cite{feigenbaum}

La representación del conocimiento formaliza y ordena el conocimiento.
%La "experiencia" de un experto puede ser representada de diversas maneras. 
%La representación del conocimiento es un esquema o dispositivo utilizado para capturar los elementos 
%esenciales del dominio de un %problema.
Existen varios sistemas para la representación del conocimiento.
Entre los principales sistemas se tienen: 
\begin{itemize}
 \item Formalismos lógicos (lógica proposicional, lógica de primer orden, lógicas multivaluadas).
 \item Sistemas de producción.
 \item Formalismos estructurados (Redes semánticas, Frames, Objetos y Ontologías).
\end{itemize}

\subsubsection{Sistemas de Producción} 
Los sistemas de producción estan compuestos de un conjunto de reglas de producción.
Una regla de producción es una sentencia que tiene la siguiente forma: 


\begin{quote}

SI $<$antecedente$>$ ENTONCES $<$consecuente$>$\end{quote} 



donde el antecedente y el consecuente son frases en lenguaje coloquial. 
Los antecedentes son las condiciones y los consecuentes las conclusiones, acciones o hipótesis. Por ejemplo, 
la siguiente regla es una regla de producción.
\begin{quote}
SI se quiere un  equipo para imprimir y escanear ENTONCES se recomienda una multifunción.
\end{quote} 
El nombre de producción se debe al hecho de que el consecuente 
describe el estado de cosas que resulta como producto de que el antecedente sea satisfecho. 

Un sistema basado en reglas se define como una colección consistente de reglas del tipo
antecedente-consecuente, una base de hechos y un motor de inferencias. \cite{waterman}

\subsection{Motor de inferencia}
\smallskip 
El motor de inferencia de un sistema experto usa los datos (hechos o evidencia) y el 
conocimiento (el conjunto de reglas almacenado en 
la base de conocimiento)  para obtener nuevas conclusiones o hechos mediante el uso de reglas de
inferencia.

Una regla de inferencia es un esquema para construir inferencias válidas. Estos esquemas establecen 
relaciones sintácticas entre un conjunto de fórmulas llamados premisas y una aserción llamada conclusión. 
Ejemplos de reglas de inferencias clásicas son Modus Ponens y Modus Tollens.

\subsubsection{Agenda}
La lista de reglas que se encuentran en la base de conocimien- to que son potencialmente ejecutables se almacenan
en lo que se denomina \textit{agenda}. Una regla es potencialmente ejecutable si su parte izquierda se satisface. 
Al conjunto de reglas que pueden ser ejecutadas se las denomina \textit{grupo de conflicto} de reglas y al
proceso de ordenarlas
para ser ejecutadas se lo denomina \textit{resolución de conflictos}. 




\subsubsection{El algoritmo de Rete}
\smallskip 


El motor de inferencias debe decidir qué regla disparar según el contexto, el componente del motor 
de inferencia que mat- chea (compara patrones) hechos con patrones en reglas
para determinar qué reglas tienen sus condiciones satisfechas deberá buscar entre posiblemente miles
de reglas. Existe un conjunto de algoritmos que abordan esta problemática de manera muy eficiente, el más
conocido es el algoritmo de Rete. 

Los lenguajes basados en reglas tienen lo que se llama redundancia temporal, que significa que en 
cada ciclo de ejecución sólo pocos hechos se agregan a la lista de hechos y los mismos afectan a pocas reglas; 
por lo que el sistema cambia muy lentamente. El algoritmo de Rete toma ventaja de esto, salvando el estado
del matching ciclo a ciclo y reconstruyendo los cambios en el estado sólo para los cambios que ocurrieron en la 
fact list. 

\subsubsection{Encadenamientos}

Un grupo de múltiples inferencias que conecta un problema con una solución se llama \textit{encadenamiento} (chain).


Un encadenamiento que va desde los hechos  hacia un objetivo o conclusión se llama encadenamiento hacia adelante o \textit{Forward Chaining}, 
mientras que un encadenamiento 
que va desde una hipótesis u objetivo hacia los hechos que soportan dicha hipótesis se llama encadenamiento hacia atrás.
\textit{Backward Chaining}. 

Debido a que los datos determinan qué reglas se usarán, el Forward Chaining es llamado inferencia data-driven en contraste 
con inferencia goal-driven referido al Backward Chaining.






\subsection{Metodología para el desarrollo de sistemas expertos}
\smallskip 

%\hilight{revizar riley y completar}
``Desde los primeros Sistemas Expertos operativos desarro- llados en la Universidad de 
Standford en la década de los '60 hasta los que hoy se desarrollan comercialmente, 
su proceso de construcción ha evolucionado desde lo artesanal en aquellos días 
hasta un sólido enfoque metodológico en la actualidad."\cite{garcia}


A través de la bibliografía consultada sobre la construcción de sistemas expertos, se ha observado
que
al igual que los modelos tradicionales de desarrollo de software, que se han propuesto %para proveer una 
%metodología que fuera útil en la construcción de grandes sistemas de software como por ejemplo 
para controlar el ciclo de vida del software, (como
el modelo de cascada, el modelo incremental, el modelo de espiral, etc) también 
 se han desarrollado varias metodologías para la producción de sistemas expertos.\cite{Riley},\cite{Carrillo}


El \textit{ciclo de vida del software} o \textit{los modelos de procesos} son en realidad meta metodologías porque determinan el orden y la duración
en el cual los métodos de software comunes son aplicados. Los métodos tradicionales de desarrollo de software 
muestran procedimientos específicos para llevar a cabo una las siguientes etapas"\cite{Riley}\footnote{pag. 318--319}.


\begin{itemize}
\item Ingeniería de requerimientos.
\item Diseño.
\item Implementación.
\item Evaluación (verificación + validación).
\item Documentación.
\item Mantenimiento.
\end{itemize}

Además de estas, el desarrollo de un sistema experto debe incluir las etapas de 


\begin{itemize}
\item Adquisición y representación del conocimiento. 
\item Selección de las herramientas de desarrollo.
\end{itemize}


\subsection{Adquisición del conocimiento}

Uno de los aspectos más importantes
en el proceso de cons- trucción de un sistema informático basado en el
conocimien- to es el de la adquisición y validación de conocimiento. 

``Dentro de los métodos de adquisición de
conocimiento se pueden citar los métodos basados en interacción humana
tales como tareas familiares, entrevistas, tareas de proceso restringido y tareas
de información limitada y los basados en técnicas de aprendizaje automático."\cite{garcia}

En \cite{Carrillo}, el autor en el desarrollo de su metodología IDEAL para el
desarrollo de sistemas basados en conocimiento,
explora, recopila y analiza varias técnicas para la adquisición del
conocimiento y la elección adecuada de su representación.
En reglas generales la adquisición del conocimiento consta de identificar las fuentes del 
conocimiento, extraer el conocimiento de dichas fuentes, ordenarlo y construir definiciones 
claves del dominio de aplicación.   




\subsection{Herramientas}
\smallskip 

Las herramientas informáticas utilizadas para la realización de sistemas expertos pueden ser
lenguajes de alto nivel (C, JAVA), ambientes especializados para aplicaciones de inteligencia artificial
(Common LISP, PROLOG) o ambientes especializados para la creación de sistemas expertos que en la literatura
se suelen denominar shells.\cite{cammarata}

Un shell es un programa preparado para la generación de sistemas expertos, incorporan un motor de inferencia y el 
ingeniero del conocimiento se limita a  crear la base de conocimien- to. En \cite{shells} hay una extensa 
referencia a distintas herramientas y shells 
disponibles hacia la década de los '90.



\textbf{LISP}: (LISt Procesing) Inicialmente instrumentado de 1958 a 1960 por Mc Carthy, basándose en la lógica matemática.	
Hacia mediados de la década del 80 el 95\% de los programas de IA estaban escritos en LISP. \cite{charniak}\footnote{pag. 33}

\textbf{Common LISP}: Durante los años 1980 y 1990, fue hecho un gran esfuerzo para unificar los numerosos dialectos del Lisp 
en un solo lenguaje. 
El nuevo lenguaje, Common Lisp, fue esencialmente un subconjunto compatible de los dialectos que reemplazó. 
En 1994, la ANSI publicó el estándar del Common Lisp, ``ANSI X3.226-1994 Information Technology Programming Language Common Lisp".
Common Lisp es un lenguaje multi-paradigma de propósitos generales. Soporta una combinación 
de paradigmas de programación como procedimental 
(imperativo), funcional, y orientada a objetos. 

\textbf{PROLOG} (PROgrammation en
LOGique) es un lenguaje de programación lógico e interpretado.

\textbf{CLIPS} (C Language Integrated Production System) es una
herramienta para el desarrollo de sistemas expertos creada
por la Software Technology Branch, NASA / Lyndon B.
Johnson Space Center. Los orígenes de CLIPS se remontan a
1984. En la actualidad, entre los paradigmas de programación que
soporta CLIPS se encuentran la programación lógica, la programación imperativa y
la programación orien- tada a objetos. Aunque ahora es de
dominio público (license public domain), aún es actualizado y mantenido por su autor original, Gary Riley.
Permite representar reglas de producción y frames.
El motor de inferencias es de tipo Forward Chaining, y hay varias formas de resolución de conflicto
(depth, breadth, LEX, MEA, complexity, simplicity y random).
Está escrito en C, por lo que es portable a varios sistemas operativos.
En la actualidad se encuentra en su versión 6.3.

Existen derivados de CLIPS para ser usados en otros lenguajes como por ejemplo:

\begin{itemize}
 \item JESS: implementación de CLIPS en Java+.
 \item FuzzyCLIPS: incorpora a CLIPS la posibilidad de usar razonamiento difuso.
 \item CLIPSMM: una interfaz libre de CLIPS con C++.
 \item PHLIPS: extensión para PHP.  (Licencia PHP V3).
 \item PyCLIPS: interfaz libre para Python (utilizada en este trabajo).(Licencia (LGPL)).
 \item CLIPSNET: librería de C\#.
\end{itemize}

Hay una extensa lista de softwares y variantes derivadas de Clips y aplicaciones desarrolladas con
Clips en el sitio web de la herramienta\footnote{http://clipsrules.sourceforge.net/OtherWeb.html}.


\textbf{SOAR (State, Operator And Result)}
Soar es una arquitectura general de desarrollo de agentes inteligentes. Es usada tanto por investigadores de inteligencia
artificial como de ciencias cognitivas para una variedad de tareas.
SOAR se usa desde 1983 y en la actualidad ha evolucionado hasta su versión actual 9.3.
Se destribuye bajo licencia BSD.
 





\begin{thebibliography}{1}

\bibitem{Riley}
Giarratano, Joseph; Riley, Gary.
\newblock {\em Sistemas Expertos, Principios y Programación.}
\newblock PWS Publishing Company, third edition, 1998.


\bibitem{garcia}
García Martinez, Ramon; Britos, Paola Verónica.
{\em Ingeniería de Sistemas Expertos}.
\newblock Nueva Libreria, 2004.  

\bibitem{feigenbaum}
Feigenbaum, Edward A. ; Barr, Avron.
\newblock {\em The Handbook of Artificial Intelligence}.
\newblock Standford, California, HeurisTech Press; Los Altos, California, W.
  Kaufmann Inc., 1982.

\bibitem{waterman}
 Waterman, D.~A.
\newblock {\em User-Oriented System for capturing Expertise: A rule based
  Aproach}.
\newblock Edingburg University Press, 1984.


\bibitem{Carrillo}
Carrillo Verdún, José Domingo.
\newblock {\em Metodología para el desarrollo de sistemas expertos}.
\newblock PhD thesis, 1987.

\bibitem{cammarata}
Cammarata, Silvio.
\newblock {\em Sistemi Esperti: teorie, metodi, strumenti tecnici}.
\newblock Milano, ETAS Libri, 1987.

\bibitem{shells}
Bourbakis, N.G.
\newblock {\em Knowledge Engineering Shells: Systems and Techniques}.
\newblock Advanced Series on Artificial Intelligence. World Scientific, 1993.

\bibitem{charniak}
Charniak, Eugene; McDermott, Drew.
\newblock {\em Introduction to Artificial Intelligence}.
\newblock Addison-Wesley, 1985.





  


  
%\bibitem{silverira}
%Silveira, Luciano.
%\newblock {\em Disenio en implementación de un motor de reglas din'amicos usando especificaciones GeneXus: Tesis de Maestr'ia}
%\newblock UNIVERSIDAD DE LA REPUBLICA, Uruguay - Montevideo, 2010.





\end{thebibliography}



\newpage


--

\newpage
\section*{DESARROLLO DEL SISTEMA EXPERTO} 

\vspace{0.5cm}

\addtocounter{section}{-1}

\section{Presentación del problema} 

\smallskip 
La elección de una determinada tecnología de impresión 
 a la hora de comprar está sujeta a numerosas cuestiones 
relacionadas con el uso que se le va a dar al equipo, 
la velocidad de respuesta deseada, la calidad esperada, factores económicos, etc.
 Requiere tiempo y esfuerzo investigar las tecnologías 
disponibles en el mercado y decidir en base a las características
 que posee cada equipo, aquel que resulte más conveniente según las necesidades. 

Los sitios web de las diferentes marcas de impresión a menudo preclasifican sus productos para
ayudar al cliente a encontrar el equipo que se necesita, otros simplemente listan los productos 
disponibles. En todos los casos, el cliente debe saber qué está buscando.
Para facilitar la tarea  de elección, lo más común es consultar con un vendedor competente en la materia. 



\subsection{Objetivos} 
\smallskip 
El principal objetivo del presente trabajo es diseñar y desarrollar un Sistema Experto online que 
emule un vendedor de sistemas de impresión, que de acuerdo a las necesidades
que el cliente exprese tener y en base a las características que poseen los equipos, recomiende de un conjunto de productos
disponibles aquellos que más se ajusten a los requisitos del cliente.



\subsection{Requerimientos generales}
\smallskip 
\subsubsection{Funcionamiento}

El cliente accederá al sistema experto a través de un browser.
El sistema debe recomendar los equipos de impresión que más se ajusten a las necesidades del cliente.
Para determinar las necesidades del cliente el sistema puede realizar preguntas al cliente y 
razonar en base a las repuestas para llegar a una conclusión.
 

\subsubsection{Actualización y Mantenimiento}

El sistema debe proveer una forma amigable de agregar nuevos equipos o modificar los ya existentes. 
También se debe permitir agregar o modificar las características técnicas posibles de los equipos de
impresión.


\section{Adquisición del conocimiento} 
\smallskip 

\subsection{Fuentes de conocimiento} 

La adquisición del conocimiento se llevó a cabo consultando las especificaciones técnicas publicadas por 
los fabricantes de equipos de impresión, a través de las interacciones con un experto en el rubro de venta de
equipos de impresión para oficina y el hogar, la página web de la empresa del experto\footnote{\textit{http://www.jeanmco.com.ar}} y 
la web de 
varias marcas de impresoras y multifunción\footnote{\textit{http://www8.hp.com}}$^,$\footnote{\textit{http://global.latin.epson.com/}}$^,$
\footnote{\textit{http://www.xerox.com}}$^,$\footnote{\textit{http://www.brother.es/}}. 
También se consultaron foros, noticias de tecnología y recomendaciones online publicadas 
por expertos en medios digitales\cite{otero},\cite{redusers},\cite{curso},\cite{consejos}.


\subsection{Definiciones y conceptos clave del dominio de tarea}

\subsubsection{Impresora - Multifunción:}
Una impresora es un periférico de ordenador que permite producir una gama permanente de textos o gráficos de
documentos almacenados en formato electrónico, imprimiéndolos en medios físicos, 
normalmente en papel o transparencias, utilizando cartuchos de tinta o tecnología láser.
Si además de imprimir el equipo cuenta con un escáner y/o fax incorporados, el equipo se denomina multifunción.

\subsubsection{Funciones:}
Una impresora posee la función de imprimir, pero si el equipo es una multifunción
significa que además posee una o más de las siguientes funciones: escanear, copiar, envío de fax, envío digital.
El envío digital es la capacidad de enviar por mail un documento digital que el equipo tenga en memoria, por lo general como 
resultado de haber escaneado algo. 

\subsubsection{Tecnologías de impresión:} 
\textbf{Matriz de punto:}
Las impresoras de matriz de puntos usan un conjunto de agujas de cabeza redonda que 
presionan una cinta entintada contra una página. Las agujas (por lo general 9 o 24) están dispuestas en una 
cuadrícula rectangular llamada matriz;
diferentes combinaciones de agujas forman los distintos caracteres e imágenes. Siguen siendo las únicas capaces de imprimir 
en formulario continuo. 
No procesan los documentos una página a la vez. En su lugar, trabajan principalmente con un flujo de caracteres
ASCII hasta una línea a la vez y, por lo tanto, requieren de buffers de memoria muy reducidos. Como resultado,
su velocidad se mide en caracteres por segundo (cps) en vez de en páginas por minuto.

\textbf{Inyección de tinta:} 
Las impresoras de inyección de tinta tienen boquillas diminutas situadas en lo que se llama cabezal de impresión,
que esparcen tinta 
especialmente formulada sobre una página. Existen dos métodos de impresión con inyección de tinta, 
uno es térmico como la que usa la línea Bubblejet de Canon y HP, en los que diminutos elementos calentadores
son usados para expulsar gotitas de tinta desde las boquillas del cabezal.
El otro método utiliza la tecnología piezoeléctrica desarrollada por Epson.
%Algunas impresoras utilizan dos cartuchos, uno para la tinta negra y otro para la de color,
 %en donde suelen están los tres colores básicos. Otras en cambio tienen 3 cartuchos para el color.

\textbf{Láser:}. Las impresoras láser funcionan creando una imagen electrostática de una página completa sobre un tambor 
fotosensible con un haz de luz láser. Cuando se aplica al tambor el polvo ultrafino, denominado tóner, 
éste se adhiere sólo a las áreas sensibilizadas correspondientes a las letras o imágenes sobre la página. 
El tambor gira y se presiona contra una hoja de papel, transfiriendo el tóner a la página y creando la imagen.
Esta tecnología es similar a la que utilizan las fotocopiadoras.
Muchas de las llamadas impresoras láser son actualmente del tipo LED. Estas impresoras reemplazan el haz de luz 
láser con una disposición fija de diodos emisores de luz (LEDs) para 
crear la imagen; por lo demás, son similares en desempeño aunque más económicas. %http://www.okiuruguay.com.uy



\textbf{Tinta Sólida:}
Las impresoras de tinta sólida son impresoras de página completa que usan varillas de tinta encerada sólida en 
un proceso \textquotedblleft phase-change" (cambio de fase). Trabajan licuando las varillas en depósitos, y luego volcando 
la tinta en un tambor de transferencia, desde donde es fusio- nada en frío en el papel en una sola pasada.
Es una tecnología exclusiva de Xerox. %www.okiuruguay.com.uy/REVOLUCION.PDF

\textbf{Sublimación de tinta:}
Las impresoras de sublimación de tinta son dispositivos especializados ampliamente usados en aplicaciones
 fotográficas y de artes gráficas. Estas impresoras trabajan calentando la tinta hasta convertirla en gas. 
El elemento térmico puede generar diferentes temperaturas, lo que permite controlar la cantidad de tinta 
que es ubicada en una mancha. En la práctica, esto significa que el color es aplicado como un tono 
continuo más que como puntos.
Un color por vez es depositado en toda la hoja, comenzando con el amarillo y terminando con el negro. 
La sublimación de tinta requiere de un papel especial particularmente caro, y los tintes 
están diseñados para difuminarse en la superficie del papel, mezclándose para crear sombras de colores 
precisas. 

\textbf{Móvil:} Las impresoras portátiles suministran muchos de los recursos que ofrecen sus similares,
 pero son lo suficientemente ligeras como para llevarlas 
a cualquier parte. Por lo general incluyen una batería recargable, y pueden ser térmicas o a inyección
de tinta. Las impresoras térmicas obtienen la imágen mediante el calentamiento de papel sensible al
calor. La impresión térmica solamente posibilita la impresión monocromática. 
 %También pueden hacer doble tarea, como las impresoras de escritorio de bajo volumen, cuando te encuentras en la oficina.


\subsubsection{Velocidad de impresión:}
La velocidad de una impresora suele medirse con el paráme- tro \textit{ppm} (páginas por minuto),  
es decir, la cantidad de páginas que puede imprimir en un minuto en determinadas condiciones. 
Otro parámetro que se utiliza es el de \textit{cps} (caracteres por segundo) 
adecuado para las impresoras matriciales que aún se fabrican.
La velocidad exacta varía según la confi- guración del sistema,
 la aplicación de software, el driver y la complejidad del documento.
Para poder comparar impresoras de distintos fabricantes basándose en las ppm se definió el 
estándar ISO/IEC 24734$:$2009 \cite{iso} aplicable tanto a impresoras como 
multifunciones que pueden imprimir en formato A4.  

\subsubsection{Calidad de impresión:} %http://www.monografias.com/trabajos11/trimpres/trimpres.shtm
Uno de los determinantes de la calidad de la impresión realizada, es la resolución que se usa
para describir la agudeza y claridad de la salida impresa. La resolución de impresión se mide en dpi 
(dots per inch) o en español, ppp (puntos por pulgada). 
 Una resolución de   ``300 dpi" se refiere a que en cada pulgada (2.54 cm) cuadrada, la impresora puede situar 300
 puntos horizontales y 300 verticales. Una expresión del tipo  ``600 x 300 dpi" , significa que el primer 
valor se asume a la línea horizontal y el segundo a la vertical.

Otro determinante de la calidad de impresión es el  número de niveles o graduaciones que pueden ser impresos por punto, 
una técnica de capas de color que hace que la oscilación en los gráficos y fotografías sea más difícil de ver.
 Las impresoras sin niveles de impresión por punto, 
imprimen cada punto de color en una de sólo dos intensidades (encendido o apagado), 
con tinta cian, magenta, amarilla o negra. Pueden combinarlas para crear tintas roja, 
verde y morada, y pueden crear la ilusión de otros colores al distribuir puntos de distintos
 colores en el papel (cada color se logra siguiendo un patrón determinado). La impresión de multinivel hace posibles más 
intensidades para cada punto que se imprime, así permite que la impresora utilice menos puntos para crear colores esfumados y
 hace que sea más difícil ver los patrones.

Máquinas con la misma resolución pueden ofrecer resultados dispares, 
porque hay que tener en cuenta el tamaño de las gotas que generarán esos puntos por pulgada y éste varía según 
la tecnología empleada para llevar a cabo la impresión.
Las gotas de tinta se miden en picolitros (1 picolitro es la billonésima parte de un litro (10$^{-12}$)).


\subsubsection{Memoria:}
La mayoría de las impresoras contienen una cantidad de memoria para almacenar parte de la información 
que se les va enviando, de forma que la computadora no tiene que estar esperando a la impresora. 




\subsubsection{Conectividad / Interfaces:}
La conectividad o conexión refiere a la forma en que la impresora se comunica con el medio, mientras que las interfaces
son los conectores que permiten la existencia de una conexión. 
La forma más antigua de conexión era mediante puerto serie en donde la transferencia se hacía bit a bit, 
permitía distancias largas con velocidades lentas que no superaban los 19.200 bytes/segundo.
Actualmente una de las formas de conexión puede establecerse mediante puerto paralelo en la que las transferencias 
son byte a byte permitiendo 8 
conexiones paralelas consiguiendo una velocidad más rápida entre los 0.5 MB/segundo hasta los 4MB/segundo. 
La longitud del cable  que une la impresora con el computador o print server no puede ser mayor a 2 metros.

Otro método de conexión más actual es por medio de puertos USB (Universal Serial Bus). 

A algunas impresoras se las puede conectar poniéndolas en red Ethernet mediante conexiones RJ 45 basadas en 
el estándar IEEE 802.3 o vía wifi, mediante el protocolo IEEE 802.11. Otra forma de conexión sin cables es a través 
de Bluetooth.

Los equipos que pueden enviar fax cuentan con una interfaz RJ 11 para poder ser conectados a la línea telefónica. 

Existe otro tipo de conexión que se denomina directa y está relacionado con las interfaces para conectar pendrives, 
tarjetas de memoria o cámaras fotográficas sin la intervención de la computadora. 



\subsubsection{Lenguajes de descripción de páginas:}
Hace unos años el texto a imprimir en un impresora era enviado en código ASCII con un carácter indicando
bold, itálica, tamaño, etc; y los gráficos eran producidos línea por línea. El problema es que este proceso era
muy dependiente del dispositivo y los caracteres raramente estaban en la misma posición con que, aparecían en pantalla.
Actualmente se usa un lenguaje de descripción de página (PDL), el cual describe el formato de las páginas,
la colocación del texto y los elementos gráficos como mapas de bits
o como objetos vectoriales.

Existen muy variados PDLs\footnote{\textit{http://www.undocprint.org/formats/
page\_description\_languages}}, los más 
conocidos son  PCL\footnote{\textit{Printer Command Languaje.}} de Hewlett Packard y Postscript de Adobe. 

Postscript: Fue uno de los primeros PDL estándar y multiplataforma; describe las páginas en forma vectorial en outline, 
las cuales son enviadas a la impresora para ser
rasterizadas\footnote{Convertidas en puntos.} en el mismo dispositivo. 

PCL: Es un lenguaje de descripción de página desarrollado por Hewlett-Packard, a principios de los ochenta,
para sus impresoras. El PCL se ha convertido en un estándar emulado por muchos otros fabricantes de impresoras. 
Además del texto real que se imprime, el PCL consta en gran medida de comandos diseñados para 
accionar diversas características y capacidades de la impresora. 

Lenguajes GDI: Algunas impresoras de inyección de tinta o de matriz de puntos no usan ninguno de los PDL 
``clásicos" (PostScript o HP-PCL), sino que recurren a la computadora para producir la página a imprimir.
A estas impresoras se les llama impresoras basadas en el host o servidor de impresora.
\textquotedblleft Algunas variantes de este tipo de impresión incluyen impresoras que usan el motor de la interfaz de dispositivo gráfico 
(GDI) de Windows para generar la imagen de la página (impresoras GDI) y la
línea de impresoras PPA (Arquitectura para Rendimiento de Impresión) de Hewlett-Packard."\cite{curso}
Esta característica es importante
porque dependiendo de cómo esté diseñada la impresora basada en el host, podría no ser posible imprimir desde 
sistemas operativos distintos a Windows.

Emulaciones:
Se dice que una impresora \textit{emula} cuando admite códigos y modos de funcionamiento de otros modelos o marcas del mercado.


\subsubsection{Ciclo mensual de trabajo - Volumen de impresiones mensuales recomendados:} 
 Los fabricantes de equipos de impresión normalmente indican el ciclo de trabajo mensual, 
que es la cantidad máxima de páginas en un determinado 
formato que el equipo puede imprimir en un mes sin deteriorarse.
Lo recomendado es que al momento de elegir un equipo el cliente elija uno cuyo ciclo de trabajo
mensual exceda por mucho a la cantidad de impresiones que se van a hacer por mes. Por
eso es que los fabricantes, también indican un volumen de páginas mensuales recomendado
que es el que debe usarse para elegir un equipo.


%\subsubsection{Insumos - Consumibles}

%\subsubsection{Color}


%Algunas impresoras utilizan dos cartuchos, uno para la tinta negra y otro para la de color, 
%en donde suelen están los tres colores básicos.


\subsubsection{Consumibles \footnote{Extraído de \textit{http://www.duiops.net/hardware/impresor /impresor.htm}}:}
En las impresoras matriciales, el mantenimiento es sencillo y
 normalmente barato, ya que únicamente será preciso cambiar la cinta,
 que suele durar bastante. El cabezal también se suele considerar como 
consumible, pero no es algo que se estropee con frecuencia, teniendo una media de vida del orden de años.

En las de inyección de tinta, lo que más se cambia son los cartuchos de tinta negra
 y/o color; el cabezal inyector no suele estropearse, y la mayoría de las impresoras 
implementan sistemas de limpieza y calibrado que permiten ajustar el funcionamiento de las mismas.
Algunas impresoras utilizan dos cartuchos, uno para la tinta negra y otro para la de color, 
en donde suelen estar los tres colores básicos. La mayoría de las impresoras de nueva generación utilizan cartuchos
 individuales por cada color, esto permite al usuario reemplazar sólo el color que se agote.
Además, con la finalidad de mejorar los tonos claros y oscuros, las nuevas impresoras fotográficas cuentan con seis
y hasta ocho colores diferentes (magenta claro, cyan claro, azul marino, naranja, rojo y verde entre otros).

Por último, en las impresoras láser el consumible por excelencia es el cartucho 
de tóner (es decir, la tinta), pero tampoco es extraño tener que cambiar la unidad 
fotoconductora o el tambor (en algunas máquinas estas dos piezas se engloban en una sola) 
cada cierto tiempo, siempre según la carga de trabajo que soporte la máquina.


\subsubsection{Rendimiento - Consumibles:}
El rendimiento por página indica la cantidad total de páginas que pueden imprimirse con un cartucho. 
En diciembre de 2006, la Organización Internacional de Estandarización (ISO, por sus siglas en inglés) 
aprobó nuevos estándares para la medición del rendimiento por página de cartuchos de tinta (ISO/IEC 24711)
 y tóner de color (ISO/IEC 19798) para impresoras.  Estos estándares complementan la norma de rendimiento 
ISO/IEC 19752 para cartuchos de tóner mono- cromático publicada en junio de 2004
\footnote{\textit{http://www1.lexmark.com/es\_MX/cartridges-ink-supplies/iso-page-yields/},

\textit{http://isotc.iso.org/livelink/livelink/open/jtc1sc28} }
que permite comparar el rendimiento de cartuchos de distintas marcas. 	

\subsubsection{Grandes formatos:}
Un plotter es un periférico de salida que efectúa con gran precisión, impresiones gráficas que una impresora no podría obtener. 
Permite imprimir mapas de gran formato, dibujos técnicos, pósteres, fotografías en materiales como vinilo adhesivo, lona, papel,
etc. Podemos considerar gran formato a todo de tamaño superior de un hoja A3. 


%\subsubsection{Usos:}

\subsection{El proceso de elección de un equipo de impresión}


\subsubsection{Lista de especificaciones técnicas }


A continuación se listan las características técnicas de los equipos de impresión 
que pueden ser encontrados en los folletos de especificaciones provistos por los
distintos fabricantes. Dichas características se tienen en cuenta para seleccionar
qué modelo de equipo se necesita.
Dependiendo del uso que se le va a dar al equipo las distintas características van 
adquiriendo más o menos relevancia. 

\begin{itemize}
%\item Marca
%\item Modelo
\item Tipo (impresora / multifunción).
\item Tecnología de impresión (láser / inyección de tinta / matriz de punto).
\item Color.
\item Funciones (imprimir / escanear /copiar /envió de fax /envío digital).
\item Volumen de impresión recomendado.
\item Conectividad  (usb / puerto paralelo / red ethernet / wifi).
\item Lenguajes de impresión soportados  (GDI / PCL / PostScript / ESC/Page).
\item Tipo de papel  (normal, fotográfico).
\item Tamaño de papel (A4, A5, etc.).
\item Velocidad de impresión.
%\begin{itemize}
% \item La velocidad exacta varía según la configuración del sistema,
% la aplicación de software, el driver y la complejidad del documento.
%\end{itemize}
\item Calidad de impresión.
\item Cantidad de memoria.
\item Dúplex automático.
\item Pantalla táctil.
\item Impresión en A3.
\item Cantidad de hojas soportadas en la/las bandejas.
\item Adicionales (bandejas adicionales).
\end{itemize}

Otras características a tener en cuenta pueden ser:
\begin{itemize}
%\item Marca
%\item Modelo
\item Período de garantía.
\item Precio de los insumos.
\item Servicio técnico local.
\end{itemize}




\subsubsection{Entrevista con el experto}
En el \textit{Apéndice A} se encuentra el contenido de los intercambios de mails con un experto (vendedor), que han sido
dispuestos en forma de entrevista. 
Usando como guía lo manifestado por el experto y lo consultado en el resto de las fuentes ya mencionadas,
podemos establecer
 cuatro características mínimas que considerar para hacer una recomendación de equipos de impresión.


\begin{quote}


\begin{itemize}
 \item  Uso ( en qué ámbito será usado: oficina, hogar, etc).  \\
 \item Funciones (copiar, imprimir, etc). \\
  \item Color.  \\
  \item Volumen mensual.  \\
\end{itemize}


% conectividad requerida  \\

\end{quote} 
 

\subsubsection{Heurísticas}
De la \textquotedblleft entrevista" con el experto se extrajo la siguiente lista  
de reglas que luego deben ser validadas.


 \begin{quote}
 
	      
	      SI es para poco uso y una sola persona ENTONCES necesita impresora chica.
	        
	      SI es para imprimir y escanear ENTONCES necesita multifunción.
	        
	      SI es para uso corporativo  ENTONCES necesita impresora de Red.
	       
	      SI no quiere cables ENTONCES necesita conexión wireless.
	      
	      SI es para altos volúmenes ENTONCES el costo del tóner es importante.
	      
	      SI el volumen mensual del equipo es menor a 2000 páginas ENTONCES la impresora es chica.
	      
	      SI es para una oficina ENTONCES necesita láser monocromo.
	      
	      SI es un estudio de arquitectura ENTONCES necesita chorro de tinta para A4 o A3 o un plotter.
	      
	      SI es para el hogar ENTONCES puede necesitar multifunción barata. \end{quote} 

 
%\textbf{Uso}
    
En la lista de reglas
hay ciertos conceptos imprecisos como \textit{impresora chica, alto volumen, poco uso}. En 
el contexto utilizado todos los términos se están refiriendo a la cantidad de páginas mensuales. 
La palabra \textit{uso} se la puede emplear tanto para manifestar frecuencia de impresión, 
como para referirse a tipo de documentos a imprimir (fotos, textos, etc).

%http://thales.cica.es/rd/Recursos/rd99/ed99-0646-02/impresora.html#laser    
    



Otras posibles reglas extraídas de noticias y recomendaciones online podrían ser las siguientes. 
\begin{quote}

SI se imprimen menos de 30 pág. a color  ENTONCES se prefiere una impresora con cartucho único.

SI se imprimen más de 30 pág. a color  ENTONCES se prefiere una impresora con separados.

SI el uso es doméstico u ocasional ENTONCES la velocidad no es relevante.

SI el uso es doméstico u ocasional ENTONCES el tamaño de la bandeja no es relevante.

SI se deben imprimir muchas copias ENTONCES la velocidad es relevante.

SI se quieren imprimir fotografías ENTONCES no se recomienda una impresora doméstica.

SI no se quieren imprimir fotografías ENTONCES una resolución de 600 dpi alcanza.

SI el volumen de impresión es alto ENTONCES se recomienda impresora láser y velocidad de impresión superior  a 30 ppm.

SI es una empresa de publicidad ENTONCES se recomienda láser color.

SI es para formularios continuos ENTONCES se recomienda matriz de punto.

SI es para el hogar o pequeña oficina ENTONCES inyección de tinta.

SI es para el hogar o pequeña oficina y se necesita calidad fotográfica ENTONCES inyección de tinta con 4 cartuchos.

SI el grupo de trabajo promedio es de 10 computadores ENTONCES el tamaño de la bandeja de entrada es importante, y 
se prefiere de más de 200 hojas. 

SI se requiere escanear en un estudio contable o de abogados ENTONCES conviene chequear si la superficie del escáner admite
tamaño legal.               \end{quote} 

\subsubsection{Perfil de usuario}

Cúales de todas las características que posee un equipo hay que tener en cuenta depende principalmente del 
uso que se le dará al equipo y en qué ámbito se le dará ese uso (hogar, empresa, etc.). 
Porque el uso determina varios del resto de las características. % Por ejemplo, para una compañía el período de garantía o saber
%si la marca del equipo tiene un representante técnico local son características que pueden adquirir gran relevancia, mientras
%que un usuario hogareño presta atención a otros aspectos. 



\subsubsection{Notas sobre volumen mensual}


 HP Argentina, en su pagina web\footnote{\textit{http://www8.hp.com.ar}
} clasifica sus productos en 5 categorías y guía al cliente que 
 visita su página en busca de impresoras 
o multifunciones en esta clasificación
de acuerdo al uso que el cliente tiene intensiones de darle. En la \textbf{tabla 1} 
se puede observar la correspondencia entre uso y volumen mensual de páginas según la web de
HP.

\begin{table*}
\caption{Volumen en páginas mensuales según uso pretendido.}
\begin{tabular}{|l|l|l|}
\hline
 \textbf{Volumen mensual}  &  \textbf{Uso pretendido} \\
\hline
\hline
 Hasta 500  &  Fotos y Documentos \\
\hline
 Entre 500 y 1000 & Impresión de documentos profesional\\
\hline
 Entre 1000 y 5000 & Empresa en crecimiento\\
\hline
 Entre 5000 y 10000   & Impresión de volumen para medianas empresas\\
\hline
 Más de 10000  & Soluciones para organizaciones Empresariales\\
\hline
\end{tabular} 
\end{table*}





En la página de Xerox\footnote{\textit{http://www.office.xerox.com/small-business/esuy.html}} dentro de
los equipos ofrecidos para la pequeña y mediana empresa hay una clasificación 
de acuerdo al tamaño del grupo
de trabajo. Dicha clasificación se compone de las categorías de  \textit{personal},\textit{ grupo pequeño} (de 1 a 3 usuarios),
\textit{grupo mediano} (de 4 a 10), y \textit{grupo grande de trabajo} (más de 10). 
Al revisar las especificaciones de los productos de las distintas categorías se observa una relación entre dichas
categorías y el ciclo mensual de trabajo, dicha relación se resume en la\textbf{ tabla 2}.


\begin{table}
 \caption{Correspondencia entre volumen de páginas mensual, el ciclo de páginas mensual y tamaño del grupo de trabajo. }


\begin{tabular}{|l|l|l|l|}
\hline
\textbf{Tamaño del grupo} &  \textbf{Ciclo mensual} &  \textbf{Volumen}\\
\hline
\hline
 1 persona & 10000  &  hasta 1000 \\
\hline
1  a 3 usuarios & hasta 50000  & hasta 4000 \\
\hline
 4 a 10 usuarios& hasta 60000 & hasta 5000  \\
\hline
   más de 10 usuarios & hasta 85000 & hasta 8000  \\

\hline
\end{tabular} 
\end{table}

\section{Diseño}

En la \textbf{figura 2} se presenta la arquitectura de tres niveles\footnote{
Una arquitectura de tres niveles es una especialización de la arquitectura 
cliente-servidor donde la carga se divide en tres partes (o capas) con un reparto claro de funciones:
 una capa para la presentación (interfaz de usuario), otra para el cálculo 
 y otra para el almacenamiento (persistencia). Una capa solamente tiene relación con la siguiente. } 
del sistema. 

Para permitir flexibilidad en la incorporación de nuevos equi- pos o modificación de los existentes, 
se utilizará una base de datos relacional (DB) para mantener las características de los equipos de impresión.  
Las interfaces web Cliente y Administrador serán interfaces gráficas HTML embebidas en código de algún lenguaje 
de script. El SE se refiere al sistema experto que interactúa con el procesador de consulta y de manera indirecta
con la base de datos. El procesador de consulta es el encargado de generar una respuesta en base a los datos provistos
por el cliente, las respuestas del SE y consultas a la base de datos.
La interfaz con la BD es el módulo que permite modificar y consultar con la base de datos en respuesta a los comandos
introducidos desde la interfaz administrativa.


\begin{center}
\begin{figure}[!ht]
\centering
 \includegraphics[scale=0.9]{arquitecturaSEBREI.png}
 % arquitecturaSEBREI.png: 0x0 pixel, 0dpi, 0.00x0.00 cm, bb=
\caption{Arquitectuta de tres capas para el sistema SEBREI. SE: sistema experto, BD: Base de datos.}
\label{arq}
\end{figure}
\end{center}


\subsection{Decisiones de Diseño}


\subsubsection{Acotación del dominio de tarea}

El mercado de equipos de impresión es bastante grande. El sistema desarrollado recomendará sólo 
equipos para los segmentos de mercados desde el hogar a empresas, 
pero siempre equipos que admitan imprimir en formato A4. 
Inicialmente el sistema no recomendará equipos para lo que se conoce como artes gráficas, ni equipos
que se encuentran dentro de la categoría de grandes formatos. 
De todas formas el diseño del sistema se planteará de forma tal que puedan ser incorporadas nuevas reglas 
que cubran estas categorías. 
%También hay algunas características de los equipos e impresión que un determinado cliente pueda desear
%y que no sea necesario el asesoramiento de un profesional para darse cuenta si un equipo que le ofrecen 
%5sirve o no a sus necesidades. Un ejemplo de esta característica podría ser el tamaño físico del equipos,
%en este caso al cliente le basta mirar la lista de especificaciones técnicas y verificar si el tamaño del
%equipo que le ofrecen es el adecuado. 

%Si bien podría ser un adicional preguntar y recomendar teniendo en cuenta este tipo de cosas, no agrega inteligencia
%al sistema y la mayoría de las veces las preguntas del sistema serán demasiado redundantes. 



\subsubsection{Representación del conocimiento} 
\smallskip 
La principal tarea del sistema experto es determinar cuáles del conjunto de características que describen a un equipo 
son relevantes y qué valores deben tener para satisfacer las necesidades del cliente. 
Una vez determinadas cuáles son las características deseadas en un equipo se procede a ofrecer los modelos
que cumplen los requerimientos.

Para determinar las características deseadas se usarán reglas de inferencia.
Mientras que los distintos modelos serán hechos factuales en la base de conocimiento. 



%\subsection{Base de datos relacional} 


\subsubsection{Determinación de las características requeridas} 

Para determinar algunas características será necesario preguntar al cliente, 
otras en cambio serán inferidas a partir de los datos provistos por el cliente.
%n CLIPS environment,
%ules can be defined by using the defrule construct

%defrule regla-funcion2
%(uso hogareña)
%(escanear si)
%> 
\subsubsection{Volumen mensual} 
Para el volúmen mensual se usará una clasificación similar a la propuesta por HP en su 
web.
Se definen 5 conjuntos crips para el volumen mensual de impresión.
Se usarán dichos conjuntos para los valores del literal \textit{uso} cuyos valores
 podrán ser \textit{hogar (hasta 500 pág.), \textit{profesional} (de 500 a 1000), 
 \textit{pyme} (de 1000 a 5000), \textit{pyme+} (de 5000 a 10000)}
 y \textit{corporativo} (de más de 10000).

Los límites del volumen mensual definidos por los fabricantes de cada equipo se usarán para categorizar
los equipos de acuerdo a los conjuntos definidos para la variable uso. %Nótese que un mismo equipo puede pertenecer
%a más de una categoría.


El uso requerido vendrá determinado a través de consultar con el cliente
 cuántas páginas cree que en promedio imprimirá en un mes. 
Con este estado de cosas podría ocurrir, por ejemplo, que se tenga un equipo A cuyo 
rango recomendado para el volumen mensual sea entre 250 y 2000 páginas, dicho equipo
pertenecerá a las categorías hogar, profesional y pyme. Si luego llega una consulta 
donde se expresa que el volumen de páginas mensuales es 3000, el sistema seteará
como pyme la categoría de uso requerida y entonces se podría llegar a recomendar el equipo A
cuyo límite superior es inferior a lo que el cliente asegura que usará. 
Este tipo de situaciones 
es considerado aceptable puesto que estamos hablando de promedios y aproximaciones. Un refinamiento
del sistema tal vez requiera que se generen un número mayor de categorías, nuevas reglas o la utilización 
de algún tipo de manejo de incertidumbre, ya sea utilizando grados de certezas o conjuntos fuzzy.  
 Dichas categorías se usarán sólo para excluir equipos que están mas o menos fuera del 
presupuesto del cliente.
%

\subsubsection{Precios}
El precio de los equipos también es una característica a tener en cuenta. Para evitar tener que
actualizar continuamente la base de datos si varían los precios de los equipos se decidió categorizar 
a los equipos de acuerdo a cierto rango de precios. En la \textbf{tabla 3} se resumen las categorías.
\begin{table}
\caption{}
\begin{tabular}{|l|l|l|}
\hline
\textbf{Tag de precio} &\textbf{Rango de precios, en pesos}  \\
\hline
\hline
económica & 0 - 500   \\
\hline
moderado & 500 - 1000\\
\hline
alto & 1000 - 3000 \\
\hline
gran inversión & 3000 -  150000\\

\hline
\end{tabular}
\end{table}



\subsubsection{Conjunto de Reglas default}
La lista de reglas por defecto que serán tenidas en cuenta para la
implementación del sistema se encuentran en el \textit{Apén- dice B}.



\subsection{Base de datos}


La \textbf{figura 3} muestra el diagrama de entidad relación de la base de datos. 
La base de datos está implementada en postgres. 
La idea inicial fue usar mysql, pero postgres
cuenta con la posibilidad de definir tipos de datos propios y definir usar arreglos en la
definición de las filas de una tabla lo cual resulta útil en este sistema.
%Para interactuar directamente con la base de datos use psql y phppgadmin.  
%El modelo de entidad de relación fueron construidos con Workbench para mysql.

\begin{center}
\begin{figure*}[!ht]
\centering
 \includegraphics[scale=0.5]{BD2.png}
\caption{Modelo EER de la base de datos.}
\label{db}
\end{figure*}
\end{center}


%La clasificación de los equipos

\section{Implementación} 

Como shell para sistemas expertos se seleccionó CLIPS por ser de dominio público, 
permitir una rápida prototipación, contar con una muy buena documentación, tener
 la capacidad de poder interoperar con otros lenguajes y la disponibilidad de varias extensiones
y derivados.
Un primer prototipo se implementó sólo en CLIPS.
  
\subsection{Breve introducción a CLIPS} 
La forma más usual de interactuar con CLIPS es a través de un intérprete de comandos. 
Para ejecutar cualquier comando en CLIPS es necesario encerrar al mismo entre paréntesis. 

(exit)  Sale de CLIPS.

(clear) Elimina datos y programas de la memoria.

(reset) Elimina la información dinámica de la memoria y resetea la agenda.

(run)  Comienza la ejecución de un programa CLIPS.

(printout) Permite imprimir en pantalla.

(read) Permite leer desde la entrada standar.

(test) Permite evaluar predicados.

\subsubsection{Hechos y Reglas en Clips}

En su modo más sencillo, CLIPS opera manteniendo una lista de hechos (facts) y un conjunto de reglas (rules) con las que operar.
Una pieza de información en CLIPS se denomina hecho. 
Los hechos en CLIPS pueden ser de dos tipos: \textit{ordered facts} y \textit{deftemplate facts}.
Un deftemplate facts es un hecho que tiene asociado un constructor denominado deftemplate que indica
la cantidad, nombre y tipo de los slot que pueden conformar un hecho.   

Sintaxis
\begin{quote}
\begin{verbatim}
(deftemplate <nombre> [cometario]
   (slot <nombre> <atributo-template>*) 
   | 
   (multislot <nombre> <atributo-template>*)
) 

<atributo-template>::= 
           (default ?DERIVE | ?NONE | <exp>*)
           |
           (default-dynamic <exp>*) 
\end{verbatim} \end{quote} 

El atributo default especifica un valor estático por defecto. 
La expresión especificada es evaluada una vez cuando se define el deftemplate
y el resultado se almacena con el deftemplate. El resultado es asignado al slot 
apropiado cuando se inserta un nuevo deftemplate fact.
La palabra \verb|?DERIVE| se usa para el valor por defecto, y por defecto el atributo default para un 
slot es default \verb|?DERIVE|. Si se usa \verb|?NONE| el valor del slot debe ser explicitamente asignado cuando se 
inserta un nuevo hecho. 
El atributo \verb|default-dynamic| expecifica que la expresión que lo acompaña será evaluada cada vez
que se inserta un nuevo hecho y el resultado se asignará al slot apropiado. 


Un ejemplo de un construtor deftemplate es el siguiente:
\begin{quote}
\begin{verbatim}
(deftemplate questions
   (slot question (default ?NONE))
   (slot atribute (default ?NONE))
   (slot type (default ?NONE))
) \end{verbatim} \end{quote} 


Y un deftemplate fact válido para dicho constructor es: 

\begin{quote}
\begin{verbatim}
  (questions
    (question "¿Será necesario escanear?")
    (atribute grupo) (type bool)
   )\end{verbatim} 
\end{quote} 


Los ordered facts no tienen asociado un deftemplate fact, por ejemplo
los siguientes hechos corresponden a ordered facts:

\begin{quote}
\begin{verbatim}
(color si)
(paginas 250)\end{verbatim} \end{quote} 


La creación de hechos se realiza mediante las sentencias assert (uno solo hecho) o deffact (un conjunto de hechos), por ejemplo:

\begin{quote}
\begin{verbatim}
(assert(color si))
(assert (questions
  (question "¿Será necesario imprimir a color?")
     (atribute color)(type bool) 
        )
)

(deffacts mis-hechos
  (color no)
  (paginas 500)
  (questions
    (question "¿Será necesario escanear?")
    (atribute grupo) (type bool)
   )
) \end{verbatim} \end{quote} 



Las reglas en CLIPS están formadas por una parte izquierda (LHS) que define las 
condiciones a cumplir y una parte derecha (RHS) que define las acciones a realizar.

Sintaxis:

\begin{quote}
\begin{verbatim}
(defrule nombre-regla"comentario"
(condicion-1)(condicion-2)...
=>
(accion-1)(accion-2)...)\end{verbatim} \end{quote} 

Para eliminar un hecho de la memoria de trabajo se usa el comando (retract f).




\subsection{Base de Conocimiento}

La base de conocimiento del sistema está constituída de hechos y reglas. 
Una vez iniciada la ejecución del sistema los hechos en la memoria de trabajo
estarán constituidos por el conjunto de datos persistentes incorporados a la memoria
a través de un deffacts y los hechos que el sistema irá aseverando como resultado de 
la aplicación de reglas en base a la información brindada por el usuario.

\subsubsection{Hechos} 

Los hechos persistentes contienen la información acerca de los equipos de impresión. 
La definición del deftemplate de los equipos tendrá un slot por cada característica de los equipos de impresión
que pueda ser necesitado para seleccionarlos. Hay un conjunto de características que son indispensables,
el resto podrán estar presentes o no en el deftemplate y la lista de deffacts. 
Desde la interfaz administrativa se puede controlar
cuáles de un conjunto de características se incorporan en la base de conocimiento. 
A continuación un ejemplo del deftemplate de los equipos:

\begin{verbatim}
(deftemplate printer
   (slot model  (default ?NONE))
   (slot tecnology (default ?NONE))
   (slot type (default ?NONE))
   (multislot conectivity (default any))
   (multislot functions (default ?NONE))
   (slot color (default ?NONE))
   (slot duplex (default any))
   (slot use (default ?NONE))
   (slot a3 (default any))
   (slot tag (default ?NONE))
 ) 
\end{verbatim} 





\subsubsection{Reglas} 

Las reglas deben tratar de capturar el conocimiento acerca de cuándo es conveniente
recomendar un tipo de equipo u otro.

Una de las características principales a determinar es el volumen de páginas
mensuales, con lo cual se seleccionará una de las categorías predefinidas para dicha
característica.
En la implementación se han usado las 5 categorías ya descriptas para el volumen de páginas
mensuales, pero el sistema admite cambiar dichos límites
e incluso se pueden crear nuevas categorías desde la interfaz web administrativa. 
Una forma de visualizar el conjunto de reglas es  
poniéndolas en una estructura de árbol.



\begin{center}
\begin{figure}[!ht]
\centering
 \includegraphics[scale=0.6]{pagmen.png}
\caption{Árbol correspondiente a la regla que determina la categoría uso.}
\label{db}
\end{figure}
\end{center}

El árbol correspondiente a la regla que determina la categoría uso se encuentra en la 
\textbf{figura 4}.
Las reglas en CLIPS para ese árbol quedan de la siguiente manera:

\begin{quote}
\begin{verbatim}
(defrule regla-uso1
        (paginas ?p)
        (test (< ?p  500) )
=>
        (assert (uso hogar)))

(defrule regla-uso2
        (paginas ?p)
        (and (test (> ?p  500) )
             (test (<=  ?p  1000)))
=>
        (assert (uso profesional)))


(defrule regla-uso3
        (paginas ?p)
        (and (test (> ?p  1000))
             (test (<=  ?p  5000)))
=>
        (assert (uso pyme)))

(defrule regla-uso4
        (paginas ?p)
        (and (test (> ?p  5000))
             (test (<=  ?p  10000)))
=>
        (assert (uso pyme+)))

(defrule regla-uso5
        (paginas ?p)
        (test (> ?p  10000))
=>
        (assert (uso empresarial)))

 \end{verbatim} 
\end{quote} 

\begin{center}
\begin{figure}[!ht]
\centering
 \includegraphics[scale=0.5]{hogar.png}
\caption{Árbol de decisión para las características de tipo, función y tecnología de los equipos de uso hogareños.}
\label{db}
\end{figure}
\end{center}
El subárbol del nodo hogar se encuentra representado en la \textbf{figura 5}. 

El sistema usa encadenamiento hacia adelante y el conjunto de reglas que los componen están 
distribuidas en los siguientes archivos:

\begin{verbatim}
"printers.clp"
"main.clp"
"regla_uso.clp"
"regla_precio.clp"
"more_questions.clp"
"adicionales.clp"\end{verbatim} 

El archivo \verb|printers.clp| contiene el deftemplate de los equi- pos, los deffacts y una regla para seleccionar
los equipos que cumplan ciertas condiciones, \verb|main.clp|
 contiene reglas que se han definido como default del sistema y que determinan si el equipo debe ser a color 
o no, si será necesario imprimir a 
doble faz de forma automática, el tipo de conexión, el tamaño del grupo de trabajo, el tipo de equipo y
las funciones requeridas. 
\verb|regla_uso.clp| determina el tipo de uso y \verb|regla_precio.clp| el tag de precio. 
\verb|more_questions.clp| inicialmente esta vació y sirve para incorporar nuevas preguntas para setear nuevas características
que se necesiten de un equipo. El archivo
\verb|adicionales.clp| contiene un conjunto de reglas adicionales relacionadas con características de los equipos que podrían ser necesarias
como por ejemplo el tamaño de la bandeja de salida estándar o si el equipo deberá contar con LCD o no. Inicialmente tiene un conjunto de
reglas configuradas para que sean neutrales tanto si en el deffact de los equipos se incluyen todas las características posibles o sólo 
las que se han elegido por defecto. 


La regla por defecto que selecciona los equipos que cumplen ciertas condiciones es la siguiente:

\begin{verbatim}
(defrule recomendar
 (printer
        (id ?id)
        (model ?model)
        (use $?uso)
        (type ?type)
        (tecnology ?tec)
        (color ?color)
        (duplex ?duplex)
        (a3 ?a3)
        (conectivity $?con1)
        (tag ?tag1)
        (functions $?functions)
  )
        (uso $?uso2)
        (functions $?functions2)
        (test (subsetp $?uso2 $?uso))
        (test (subsetp $?functions $?functions2))
        (test (subsetp $?functions2 $?functions))
        (conectivity $?con2)
        (tag $?tag2)
        (test (member$ ?tag1 $?tag2))
        (test (subsetp $?con2 $?con1))
        (type ?type)
        (tecnology ?tec)
        (color ?color)
        (a3 ?a3)
        (duplex ?duplex)
 =>
        (assert (models(model ?model)))
        (assert (ids(id ?id)))

)
\end{verbatim} 

La función \verb|(subsetp <multifield> <multifield>)| retorna TRUE
si el primer argumento es un subconjunto del segundo.


Si el primer argumento es uno de los campos del segundo, 
la función \verb|(member$ <single-field> <multifield>)| retornará un entero con la posición del campo, 
de otro modo retornará FALSE.



\subsubsection{Reglas Adicionales}
Si por ejemplo se desea incluir la característica de cuáles sistemas operativos 
son soportados por cada equipo entonces 
en la definición del deftemplate se debe agregar la sentencia

\verb|(multislot so (default any))|

y cada instancia de equipo tendrá la lista de sistemas operativos que soporta.

La regla \verb|adicionales| incluye el assert

\verb|(assert (so any linux windows mac ))|

y a la regla \verb|recomendar| se le debe agregar las condiciones correspondientes para sistema operativo\footnote{Líneas
5,7 y 8.}. 

\begin{quote}
\begin{verbatim}
1  (defrule recomendar
2   (printer
3        (id ?id)
4        (model ?model)
5        (so $?so))
6       
7        (so $?so2)
8        (test (subsetp $?so $?so2))  
9      =>
10        (assert (models(model ?model)))
11        (assert (ids(id ?id))))
\end{verbatim} \end{quote} 

Dado que la regla \verb|adicionales|  hace un assert de todos los sistemas operativos
 disponibles en la base de datos
y los equipos sólo tienen la posibilidad de tener asociados sistemas operativos
 que se encuentran en la base de datos, haber seleccionado la característica
sistemas operativos para incorporar a las características de los equipos no tiene 
efecto alguno sobre las recomendaciones que el sistema experto está en grado de hacer. 
Es necesario modificar la regla de reglas adicionales eliminando la claúsula 

\verb|(assert (so any linux windows mac ))|

 y agregar una nueva regla que tome alguna decisión 
acerca de cúales sistemas operativos deben soportar los equipos a recomendar. 


\section{Evaluación del prototipo}

La regla \verb|recomendar| selecciona todos los modelos de impresoras o multifuciones que cumplen
el conjunto de características de uso, funciones, conexiones, tags, tipo, color, 
tecnología, a3, y duplex. Por lo tanto el conjunto de reglas por defecto debe
setear los valores de dichas características. 

Dado que la cantidad de reglas es reducida y en general se las puede organizar
como árboles de desición para las distintas características es fácil comprobar 
que no hay reglas inconsistentes, contradictorias, referencias circulares o reglas
que no pueden ser alcanzadas en el sistema. 

CLIPS tiene a su vez varios comandos que pueden ser útiles a la hora de chequear el 
funcionamiento del sistema.  

(agenda): Muestra las reglas instanciadas.
 Para cada instancia muestra la prioridad de la regla, el nombre de la regla y los hechos reconocidos por la regla.

(facts) Muestra los hechos de la memoria de trabajo.

(watch <parámetro>) Es útil para depurar programas. El parámetro puede ser uno de los siguientes símbolos: facts, rules, 
activations, statistics, compilations, focus, o all. 


(matches <nombre-de-regla>) Recibe como argumento el nombre de una regla y muestra los hechos reconocidos por cada patrón. 

Se realizaron varios ensayos sobre el prototipo que cuenta con una lista de 45 equipos para verificar el funcionamiento
y que la respuesta obtenida sea aceptable.

Lo siguiente es un ejemplo de un test de prueba.

Se elige un equipo de la base de conocimiento, en este caso el modelo es

\verb|HP_Color_LaserJet_Enterprise_CP5525dn| 

cuyas características son las siguientes:

\begin{quote}
\begin{verbatim}
(printer (id 48)
(model "HP_Color_LaserJet_Enterprise_CP5525dn" )
(tecnology laser)
(type impresora)
 (conectivity ethernet usb) 
(functions imprimir)
(color si)(duplex si)
(use pyme pyme+)
(tag gran_inversion)(a3 si)
)\end{verbatim} \end{quote} 

Dentro del interprete de órdenes de CLIPS se
 ejecuta el sistema tipeando el comando \verb| (batch "SE.clp")|
\begin{quote}
\begin{verbatim}
CLIPS> (batch "SE.clp")
TRUE\end{verbatim} \end{quote} 

El sistema responde TRUE, lo que indica que las reglas se cargaron de manera correcta. 

Luego se responden las preguntas hechas por el sistema de modo que si el sistema está correctamente implementado
se seteen las características correspondientes al equipo seleccionado. 


\begin{quote}
\fbox {
    \parbox{\linewidth}{

\begin{verbatim}
Será necesario imprimir a color?

Respuesta> no

Cúal es el volumen mensual de páginas?

Respuesta> 5001

¿Cúal es el tamaño del grupo de trabajo?

Respuesta> 5

¿Cúanto es lo máximo que esta dispuesto a gastar?

Respuesta> 3100

Le interesa poder imprimir a doble faz de 
 forma automatica?, encarecerá un poco el equipo.

Respuesta> si

¿Se necesitará imprimir en A3?

Respuesta> no

¿Te interesa poder escanear documentos, 
enviar fax o archivos digitales via mail 
con el mismo equipo?

Respuesta> si

LaserJet\_Enterprise\_M4555f\_MFPn

\end{verbatim}
}}\end{quote}  

La respuesta del sistema ha sido justamente

 \verb|LaserJet_Enterprise_M4555f_MFPn|.

 En este caso este es el único equipo 
en la base de conocimiento con dichas características. El sistema recomienda exactamente lo que se ha definido
que haga. Para este ejemplo en particular el equipo recomendado tiene un valor de 13000 pesos, lo cual esta muy por 
encima del presupuesto que se le indicó al sistema. A decir verdad un equipo con las características pedidas raramente tendrá
un valor inferior a 10000 pesos, por lo que la recomendación sigue siendo válida. Ante este tipo de situaciones una cosa que se 
puede hacer es emitir un mensaje diciendo que todos los equipos superan el presupuesto del cliente pero aún así recomendarlos. 
También debe considerarse si las categorías planteadas tanto de precio como de uso son válidas. 
%Por lo demás el sistema funciona apropiadamente. 

A continuación un subconjunto de la lista de hechos que 
pueden observarse al tipear el comando \verb|facts| para este ejemplo:

\begin{quote}
\begin{verbatim}
CLIPS> (facts)
...
f-48    (color no)
f-49    (paginas 5001)
f-50    (grupo 5)
f-51    (precio 3100)
f-68    (uso pyme+)
f-69    (duplex si)
f-70    (a3 no)
f-72    (type multifuncion)
f-73    (functions imprimir copiar 
         escanear fax envio_digital)
f-74    (tecnology laser)
f-75    (tag gran_inversion economica 
         moderado alto)
f-76    (conectivity ethernet)
f-77    (models 
 (model "LaserJet_Enterprise_M4555f_MFP"))
f-78    (ids (id 53))\end{verbatim} \end{quote} 


%Y la lista de matcheos, en particular 
El equipo recomendado corresponde al fact 37.
A continuación la lista de matcheos que pueden obtenerse con el comando\verb| matches|.


\begin{quote}
\begin{verbatim}
CLIPS> (matches recomendar)
Matches for Pattern 1
f-1 .. f-46
Matches for Pattern 2
f-68
Matches for Pattern 3
f-73
Matches for Pattern 4
f-76
Matches for Pattern 5
f-75
Matches for Pattern 6
f-72
Matches for Pattern 7
f-74
Matches for Pattern 8
f-48
Matches for Pattern 9
f-69
Matches for Pattern 10
f-70
Partial matches for CEs 1 - 2
f-1,f-68
..
f-46,f-68
Partial matches for CEs 1 - 3
f-38,f-68,f-73
f-37,f-68,f-73
f-33,f-68,f-73
Partial matches for CEs 1 - 4
f-33,f-68,f-73,f-76
f-37,f-68,f-73,f-76
f-38,f-68,f-73,f-76
Partial matches for CEs 1 - 5
f-33,f-68,f-73,f-76,f-75
f-37,f-68,f-73,f-76,f-75
Partial matches for CEs 1 - 6
f-33,f-68,f-73,f-76,f-75,f-72
f-37,f-68,f-73,f-76,f-75,f-72
Partial matches for CEs 1 - 7
f-33,f-68,f-73,f-76,f-75,f-72,f-74
f-37,f-68,f-73,f-76,f-75,f-72,f-74
Partial matches for CEs 1 - 8
f-37,f-68,f-73,f-76,f-75,f-72,f-74,f-48
Partial matches for CEs 1 - 9
f-37,f-68,f-73,f-76,f-75,f-72,f-74,f-48,f-69
Partial matches for CEs 1 - 10
f-37,f-68,f-73,f-76,f-75,f-72,f-74,f-48,
f-69,f-70\end{verbatim} \end{quote} 

Los signos '..' significan que todos los hechos intermedios también fueron reconocidos por el patrón.




\section{Desarrollo de la interfaz web}  
\subsection{Interfaz administrativa}

La interfaz administrativa permite  agregar o modificar entre otras cosas el tipo de equipos, tecnología, funciones, y 
nuevo equipamiento a la base de datos. También cambiar
paráme- tros que afectan el comportamiento del sistema experto, como por ejemplo cambiar el límite de
las categorías de volumen mensual de impresión o inclusive agregar nuevas.  
\begin{figure*}[!ht]
 \centering
\setlength\fboxsep{0pt}
\setlength\fboxrule{0.5pt}
\fbox {\includegraphics[scale=0.5]{./menu.png}}
 % menu.png: 764x614 pixel, 72dpi, 26.95x21.66 cm, bb=0 0 764 614
\caption{Menú principal de la Interfaz Administrativa.}
\end{figure*}

\subsubsection{Requerimientos}
La interfaz web debe permitir al administrador del sistema agregar elementos a la base de datos y ajustar ciertos parámetros del SE. 
Debe permitir: 
\begin{itemize}
 \item Logueo y autenticación
\item Agregar/Modificar :
 
    \begin{itemize}
        \item Impresoras
        \item Conectividades
        \item Marcas
        \item Velocidades de impresión
        \item Tecnologías de impresión
        \item Tipo de equipos
        \item Sistemas operativos soportados
        \item Tamaños de papel
        \item Tipos de papel
        \item Calidades de impresión 
        \item Funciones del equipo
	\item Lenguajes de impresión
        \item Consumibles
        \item Cambiar límites a los tags (de uso y de precios)
        \item Usuarios 
       \end{itemize}

\item Mantenimiento:
          \begin{itemize}
        \item Actualizar tag a los equipos
        \item Generar listas de impresoras
        \item Actualizar reglas 
     
       \end{itemize}


\end{itemize}




\subsubsection{Implementación}
La interfaz administrativa del sistema se desarrolló en PHP.
 
En la \textbf{figura 6} se muestra el menú general del sistema. Cada link de la columna
agregar/modificar permite agregar o e- ditar una característica relacionada con las impresoras
o un nuevo equipo. 





El formulario de agregar un nuevo equipo (\textbf{figura 7}) sirve para incorporar a la base de datos, los datos correspondientes
a un nuevo equipo, el formulario permite asociar todas las características presentes en la base de datos a un equipo de 
impresión. 
\begin{figure*}
 \centering
\setlength\fboxsep{0pt}
\setlength\fboxrule{0.5pt}
\fbox { \includegraphics[scale=0.5]{./mod_printer.png}}
 % printer.png: 1280x1024 pixel, 72dpi, 45.16x36.12 cm, bb=0 0 1280 1024
\caption{Formulario de agregar nuevo equipo.}
\end{figure*}

Algo práctico es que no es necesario clasificar los equipos de acuerdo al uso o precio de los mismos, 
el sistema se encarga de categorizarlos automáticamente de acuerdo a los límites seteados para cada categoría
definida.

Una vez completado el formulario, al presionar el botón si- guiente aparece un nuevo
formulario (\textbf{figura 8}) para asociar los cartuchos al equipo\footnote{Inicialmente el sistema no usa esta información, 
pero podría llegar a ser necesario ya que cada cartucho tiene asociado una duración en páginas y esta información
podría utilizarse para calcular el costo de
mantenimiento del equipo.}, en particular sólo aparecerán los cartuchos 
disponibles de la misma marca que el equipo que se esté cargando. 

\begin{figure}
 \centering\setlength\fboxsep{0pt}
\setlength\fboxrule{0.5pt}
\fbox {\includegraphics[scale=0.5]{./print_cart.png}}
 % print_cart.png: 398x578 pixel, 72dpi, 14.04x20.39 cm, bb=0 0 398 578
\caption{Formulario para asociar los cartuchos con sus respectivos equipos.}
\end{figure}

Las categorías de uso controlan los límites de la variable lingüística \textit{uso} relacionada con el volumen
de páginas mensuales. La interfaz permite agregar tantas categorías como se quieran (ver  \textbf{figura 9}). 

\begin{figure*}
 \centering
 \centering\setlength\fboxsep{0pt}
\setlength\fboxrule{0.5pt}
\fbox { \includegraphics[scale=0.5]{./uso.png}}
 % uso.png: 1280x1024 pixel, 72dpi, 45.15x36.12 cm, bb=0 0 1280 1024
\caption{Formulario para agregar nuevas categorías de uso o alterar las existentes.}
\end{figure*}

El menú para cambiar los límites y categorías de precio cumple un papel similar con respecto a la 
categorías relacionadas con el precio de los equipos.
Si se alteran los tags de precio o uso las descripciones asociadas a los equipos podrían dejar de ser
consistentes, por lo que es necesario actualizarlas. El menú de \textsl{Actualizar las categorías} del menú principal
cumple dicha
función. Luego deberán generarse nuevamente el file de impresoras y las reglas de precio o uso respectivamente. 

Hay varios motivos por los cuales se debe volver a generar el archivo de impresoras: 
\begin{itemize}
\item Se han agregado/modificado equipos.
\item Se han agregado/modificado los tags de uso o precio.
\item Se quiere incluir una característica nueva a los equipos para ser considerada por el sistema
experto.
\end{itemize}

Al hacer click sobre el menú de\textsl{ Generar impresoras} del menú prinicipal se abre un formulario que permite
seleccionar un grupo de características disponibles para incluir en la base de conocimiento (ver \textbf{figura 10}).
\begin{figure}
 \centering
 \centering\setlength\fboxsep{0pt}
\setlength\fboxrule{0.5pt}
\fbox { \includegraphics[scale=0.5]{./printer_list.png}}
 % uso.png: 1280x1024 pixel, 72dpi, 45.15x36.12 cm, bb=0 0 1280 1024
\caption{Formulario para la generación automática de archivo de equipos.}
\end{figure}

Si todo sale bien el proceso genera dos archivos \verb|printer.clp| y \verb|temporary_rules_adicional|, el
segundo sirve de ejemplo para crear las reglas adicionales del archivo \verb|aditionales.clp| (ver \textbf{figura 11}). 
 \begin{figure}
 \centering
 \centering\setlength\fboxsep{0pt}
\setlength\fboxrule{0.5pt}
\fbox { \includegraphics[scale=0.5]{./generar2.png}}
 % uso.png: 1280x1024 pixel, 72dpi, 45.15x36.12 cm, bb=0 0 1280 1024
\caption{Respuesta exitosa de la generación automática del archivo de equipos.}
\end{figure}
  


\subsection{Interfaz cliente}
Para portar el sistema de manera online a través de un servidor web se ha 
usado la librería PyCLIPS, la otra opción era PHLIPS. Ambas implementan un subconjunto de
los comandos propios de CLIPS, pero PyCLIPS implementa un número mayor de comandos y además
cuenta con una muy buena documentación y un activo foro de discusión\footnote{http://sourceforge.net/projects/pyclips/forums}.

\subsubsection{Objetivos}
La interfaz web del sistema experto con las personas que van a consultar debe hacer las mismas preguntas 
y generar el mismo resultado que el sistema batch para CLIPS.
De hecho uno de los objetivos fue que se usen los mismos archivos en CLIPS para ambas interfaces.

\subsubsection{Notas a la implementación}

Las reglas que incluyen 
sentencias del tipo printout y read deben ser modificadas de modo que en vez de imprimir 
en pantalla se haga un assert con la pregunta que debe ser hecha al usuario. 
%Para mantener la idea de usar los mismos archivos 
%para ambas interfaces (web y terminal) 
Se creó el siguiente deftemplate:

\begin{verbatim}
(deftemplate questions
   (slot question (default ?NONE))
   (slot atribute (default ?NONE))
   (slot type (default ?NONE))
)\end{verbatim} 

Dicha estructura se usa para comunicar la pregunta a la interfaz web. 
Las reglas que hacían preguntas al usuario se seguirán usando con la terminal y deben cumplir la
condición de que el sistema este siendo ejecutado en una terminal y al mismo tiempo se crearon reglas 
similares para usar con la interfaz web. 

Por ejemplo si una regla era como la que sigue:

\begin{verbatim}
(defrule regla1
=>
  (printout t crlf "¿Se necesitará imprimir en A3?")
  (printout t crlf "Respuesta>")
  (bind ?ans (read))
  (assert (a3 ?ans))
)\end{verbatim} 

Se reemplazará con la siguiente: 

\begin{verbatim}
(defrule regla1
 (terminal)
=>
  (printout t crlf "¿Se necesitará imprimir en A3?")
  (printout t crlf "Respuesta>")
  (bind ?ans (read))
  (assert (a3 ?ans))
)
\end{verbatim} 
y se creará la siguiente regla

\begin{verbatim}
(defrule regla12
 (browser)
 =>
 (assert (questions
    (question "¿Se necesitará imprimir en A3?")
    (atribute a3)
    (type bool)
 )
)
\end{verbatim} 

El sistema se encargará de hacer la pregunta y generar el assert correspondiente
con la respuesta del usuario, para el caso de la interfaz web. 

\subsection{Testing}

Lo que queda por verificar es que la respuesta del sistema sea la misma tanto si es ejecutado
a través del browser o desde una terminal.

Por ejemplo el siguiente test de prueba:

 

\begin{quote}
\fbox {
    \parbox{\linewidth}{
\begin{verbatim}
CLIPS> (run)

Será necesario imprimir a color?

Respuesta>no

Cúal es el volumen mensual de páginas?

Respuesta>300

¿Cúal es el tamaño del grupo de trabajo?

Respuesta>2

¿Cúanto es lo máximo que 
  esta dispuesto a gastar?

Respuesta>500

Te interesaria ademas de imprimir poder 
      escanear documentos con el mismo equipo?

Respuesta>no

Necesitaras desplazar la impresora en viajes, 
    o trasladarla a diferentes habitaciones?

Respuesta>no

\end{verbatim} 

}}\end{quote} 

Respuesta del sistema


\begin{verbatim}
HL-2130n
HL-2240n

\end{verbatim}


\begin{figure}
 \centering
 \centering\setlength\fboxsep{0pt}
\setlength\fboxrule{0.5pt}
\fbox { \includegraphics[scale=0.4]{./resp2.png}}
 % uso.png: 1280x1024 pixel, 72dpi, 45.15x36.12 cm, bb=0 0 1280 1024
\caption{Resultado de una ejecución de consulta en la Interfaz Web Cliente de SEBREI.}
\end{figure}

En todos los casos testeados la respuesta es la misma en ambas interfaces. En la \textbf{figura 12} se encuentra el resultado
de dar las mismas respuestas que en el test del ejemplo. 
La única diferencia entre la interfaz web y la interfaz para terminal es que en la interfaz web además del modelo de los equipos
se da una breve descripción del modelo si es que está presente en la base de datos y un link al folleto o página web
del equipo en cuestión. 

\newpage
\section{Conclusión y notas finales}
Construir este sistema ha servido para satisfacer mi curiosidad acerca de los sistemas expertos. 
En particular he comprendido que la parte más difícil de la construcción de este tipo de sistemas 
 es la adquisición del conocimiento, así como la selección
de una correcta representación del conocimiento. 


También me he hecho a la idea de que construir un sistema experto medianamente complejo
puede llegar a requerir varios años de desarrollo por lo que primero conviene hacer un verdadero estudio 
de la viabilidad del proyecto,
que por lo general incluye costo, disponibilidad de las fuentes del conocimiento, utilidad o necesidad de la construcción
del sistema, determinar si las características del problema que resuelve son apropiadas para ser resuelto mediante un sistema
experto, entre otras. 
 

%\bibliographystyle{plain}
%\bibliography{references}
Una de las cosas que me parece vale la pena destacar del sistema construído
es la posibilidad de manetener actualizada la base de conocimiento
a través de una base de datos, la generación automática de los deffacts, de las reglas de tag, uso, adicionales y recomendar. 
También es un buen atributo la posibilidad de agregar nuevas heurísticas sobre características presentes en la base de datos
y que inicialmente no se han incorporado al conjunto de reglas por defecto. 



\newpage
%\bibliographystyle{nature}
%\bibliography{references}
\begin{thebibliography}{1}

\bibitem{otero}
Otero~Spagnuolo, M.

\newblock {\em Consejos para comprar una impresora}

\newblock {\em http://marina-otero-spagnuolo.suite101.net/consejos-para-comprar-una-impresora-a29960}
 \newblock {Nov, 2010 }

\bibitem{redusers}
Fiorotto, A.

\newblock {\em Impresoras: consejos antes de salir a comprar}.

\newblock {\em http://www.redusers.com/noticias/impresoras-consejos-antes-de-comprar/}
\newblock {Abril, 2011 }

\bibitem{curso}
Montoya, Marcelo~A.
\newblock {\em Impresoras, Curso online}.

\newblock { \em http://www.mailxmail.com/curso-impresoras.}

\bibitem{consejos}
Huergo, C.

\newblock {\em Consejos para tener en cuenta antes de comprar una nueva impresora}.

\newblock {\em http://tecnologia.iprofesional.com/notas/115886-Consejos-para-tener-en-cuenta-antes-de-comprar-una-nueva-impresora}
\newblock {Mayo, 2011}


\bibitem{iso}
ISO/IEC, 24734:2009.

\newblock {\em Information technology: Office equipment: Method for measuring digital printing productivity}.

\newblock {\em http://www.iso.org/iso/iso\_catalogue/catalogue\_tc

/catalogue\_detail.htm?csnumber=38844}
 \newblock {2009.}

\bibitem{git}
Giarratano, Joseph.
\newblock {\em CLIPS User's guide}.
\newblock {Quicksilver Beta, 2007}.

\bibitem{git2}
Giarratano, Joseph.
\newblock {\em CLIPS Reference Manual}.
\newblock {Quicksilver Beta,Volume I, 2007}.


\bibitem{garo}
 Garosi, F.
\newblock {\em PyCLIPS Manual}

{\em http://pyclips.sourceforge.net/manual/}
\newblock {Feb 22, 2008}.



%http://pcayuda.com.ar/impresoras/49/impresoras-y-toners-%C2%BFcomprar-laser-o-inkjet/



\end{thebibliography}



%\begin{thebibliography}{9}

%\bibitem{Riley} 
%Giarratano Riley. Sistemas Expertos, Principios y Programación.  2003

%\bibitem{Riley2} 
%Giarratano Riley. Sistemas Expertos, Principios y Programación.  2003. pag 318-319
%\   Ingenieria del conocimientos. Aspectos metodolo

%Russell, Stuart J.; Norvig, Peter (2003), Artificial Intelligence: 
%A Modern Approach (2nd ed.), Upper Saddle River, New Jersey: Prentice Hall, ISBN 0-13-790395-2

%\end{thebibliography}

\newpage

\appendix
\section{Entrevista con el Experto}



\textbf{IC}- \textit{¿Qué tipo de información se le pide a un cliente cuando se acerca con intenciones de comprar un equipo
de impresión?.}

\textbf{Experto}- \textit{Hay varias consideraciones cuando un interesado consulta por impresoras, las relevantes son:}

\textit{\begin{enumerate}
 \item Qué tipo de uso le va a dar a la impresora, también el trabajo o profesión del cliente es un dato orientativo.
 \item Producción de trabajo diario o mensual.
 \item Si es para grupos de trabajo o para usar solo junto a una PC.
 \item Si también escanean documentos, sacan fotocopias y/o usan fax
\end{enumerate}}

\textit{
Con estos primeros datos ya tenemos para prepararle un abanico de soluciones de impresión.
Es decir, si es para poco uso y una sola persona puede sugerirse una impresora chica, 
si también escanea se amplía a una multifunción.
Si ya es corporativa conviene una impresora en RED, con print server interno.
A veces el cliente para su hogar ya está pidiendo impresoras WIRELESS ya que no quiere cables dando vuelta por su casa, 
también hoy hay estos equipos.
Además para los fanáticos de la tecnología tenemos las nuevas máquinas que imprimen desde un smartphone, etc.
También hoy el asesoramiento va por el costo de los toner que al momento de la elección puede 
ser importante sobre todo para altos volúmenes.}

\textbf{IC}-\textit{ ¿Cúal debe ser aproximadamente el volumen de impresiones diario o mensual 
para que se concidere que se necesita una impresora chica?, o sino ¿cuándo considero que una impresora es chica?}

\textbf{Experto}- \textit{Normalmente el fabricante especifica en la folletería el volumen de trabajo, 
normalmente si el volumen mensual es de hasta 1.500 a 2.000 páginas por mes, 
en Argentina se estila comprar una máquina chica.}

\textbf{IC}- \textit{Mencionaste que la profesión de un cliente es un dato orientativo para la recomendación de un equipo, 
en ese sentido necesitaríamos un poco más de detalle. ¿Qué tipos de profesiones indican qué tipos de equipos?}

\textbf{Experto}- \textit{Por ejemplo, para una oficina lo más común es usar impresoras láser monocromo.
Si es un estudio de arquitectura es probable que usen chorro de tinta ya sea formato pequeño o bien A3 
(297 $\times$ 432 mm.) o bien plotter.
Un diseñador gráfico o fotógrafo pude elegir una impresora HP Photosmart con 6 tintas de colores diferentes.
Para el hogar una multifunción inkjet línea barata.
Si entrás a la página de HP vas a encontrar que las impresoras las categorizan para:
\begin{itemize}
 \item mercado hogareño
 \item mercado de diseño
 \item  mercado corporativo
\end{itemize}     }       



%\appendix
 \section{Reglas default}
SI el uso es hogar ENTONCES no es necesario imprimir en A3 ni duplex automático.

SI el uso es hogar y no es necesario escanear ENTONCES sólo se necesita imprimir.

SI el uso es hogar y es necesario escanear ENTONCES se necesita una multifunción que imprima, 
copie y escanee y la tecnología de impresión puede ser laser o a chorro de tinta. 

SI el uso es hogar, no es necesario escanear y es necesario trasladar el equipos ENTONCES se 
necesita una impresora móvil. 

SI el uso es hogar, no es necesario escanear y no es necesario trasladar el equipos ENTONCES se 
necesita una impresora.

SI se necesita una impresora móvil y es necesario imprimir a color ENTONCES se recomienda tecnología 
de impresión a chorro de tinta.

SI se necesita una impresora móvil y no es necesario imprimir a color ENTONCES la tecnología 
de impresión puede ser témica o chorro de tinta.

SI el uso no es hogar ENTONCES el cliente debe indicar si desea imprimir en A3.

SI el uso no es hogar ni profesional ENTONCES es una desición del cliente si quiere un equipos con
duplex automático.

SI el uso es profesional ENTONCES no ofrecer duplex automático.

SI el uso es profesional y es necesario enviar fax con el equipo ENTONCES se recomienda
una multifunción que imprima, copie, escanee y envíe fax. 

SI el uso es profesional y no es necesario enviar fax con el equipo pero si escanear ENTONCES se recomienda
una multifunción que imprima, copie, escanee.

SI el uso es profesional y no es necesario enviar fax, ni escanear ENTONCES se recomienda una impresora.

SI el uso es profesional y el volumen mensual es hasta 800 páginas ENTONCES la tecnología
de impresión puede ser laser o a chorro de tinta.

SI el uso es profesional y el volumen mensual es mayor a 800 páginas ENTONCES se recomienda láser como tecnología de impresión.

SI el uso es pyme y es necesario enviar fax y documentos digitales ENTONCES se recomienda una multifunción que imprima, copie, escanee,
envie fax y domcumentos digitales. 

SI el uso es pyme y es necesario enviar fax y no documentos digitales ENTONCES se recomienda una multifunción que imprima, copie, escanee,
envie fax. 

SI el uso es pyme y no es necesario enviar fax, ni documentos digitales pero sí escanerar ENTONCES se recomienda 
una multifunción que imprima, copie y escanee.

SI el uso es pyme y no es necesario enviar fax, ni documentos digitales, ni escanerar ENTONCES se recomienda 
una impresora. 


SI el uso es pyme+ o corporativo ENTONCES se recomienda láser como tecnología de impresión.

SI el uso es pyme+ y es necesario enviar fax o documentos digitales o escanear ENTONCES se recomienda una multifunción 
que imprima, copie, escanee, envie fax y domcumentos digitales. 

SI el uso es pyme+ y sólo se necesita imprimir ENTONCES se recomienda una impresora.

SI el uso es corporativo y es necesario enviar fax ENTONCES se recomienda 
una multifunción imprima, copie, escanee, envie fax y domcumentos digitales.

SI el uso es corporativo y no es necesario enviar fax pero sí documentos digitales ENTONCES se recomienda 
una multifunción imprima, copie, escanee y envíe domcumentos digitales.

SI el uso es corporativo y no es necesario enviar fax ni documentos digitales ENTONCES se recomienda 
una impresora. 

SI el tamaño del grupo de trabajo es menor o igual a 2 ENTONCES se recomienda conexión usb.

SI el tamaño del grupo de trabajo está entre 2 y 4 personas ENTONCES se recomienda conexión usb o wifi.

SI el tamaño del grupo de trabajo es mayor a 4 personas ENTONCES se recomienda conexión ethernet. 



\end{document}
